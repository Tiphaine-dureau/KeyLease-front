<app-property-card *ngIf="propertyId"
                   [title]="title"
                   [subtitle]="subtitle"
                   [propertyId]="propertyId"></app-property-card>

<mat-card class="mt-3">
  <mat-card-content>
    <form [formGroup]="leaseContractFormGroup">
      <!--OWNER SELECTION-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Sélectionner un propriétaire pour ce bien</mat-label>
        <mat-select formControlName="owner">
          <mat-option *ngFor="let owner of (owners$ | async)"
                      [value]="owner.id">{{owner.lastName}} {{owner.firstName}}</mat-option>
        </mat-select>
      </mat-form-field>

      <!--TENANT SELECTION-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Sélectionner un locataire pour ce bien</mat-label>
        <mat-select formControlName="tenant">
          <mat-option *ngFor="let tenant of (tenants$ | async)"
                      [value]="tenant.id">{{tenant.lastName}} {{tenant.firstName}}</mat-option>
        </mat-select>
      </mat-form-field>

      <!--RENT AMOUNT-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Montant du loyer</mat-label>
        <input matInput type="number" formControlName="rentAmount">
      </mat-form-field>

      <!--RENT CHARGES-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Montant des charges locatives</mat-label>
        <input matInput type="number" formControlName="rentCharges">
        <mat-hint align="start">Charges inclues dans le prix du loyer</mat-hint>
      </mat-form-field>

      <!--REQUIRED DEPOSIT-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Montant requis du dépôt de garantie</mat-label>
        <input matInput type="number" formControlName="requiredDeposit">
      </mat-form-field>

      <!--PAID DEPOSIT-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Montant payé du dépôt de garantie</mat-label>
        <input matInput type="number" formControlName="paidDeposit">
      </mat-form-field>

      <!--EXPECTED AMOUNT FROM CAF TO OWNER-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Montant CAF alloué au propriétaire</mat-label>
        <input matInput type="number" formControlName="expectedAmountFromCafToOwner">
      </mat-form-field>

      <!--DATE CONTRACT SIGNATURE-->
      <mat-form-field appearance="fill" class="lease-contract-form-field">
        <mat-label>Signature du contrat</mat-label>
        <input matInput type="text" formControlName="dateContractSignature" [matDatepicker]="picker">
        <mat-hint>jour/mois/année</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>

      <!--SUBMIT-->
      <mat-card-actions align="end">
        <button mat-raised-button color="primary" (click)="onSubmit()" [disabled]="!leaseContractFormGroup.valid">
          Valider le contrat
        </button>
      </mat-card-actions>
    </form>
  </mat-card-content>
</mat-card>

